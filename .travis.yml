matrix:
  include:
    - os: linux
      language: node_js
      node_js: "12.18"
    - os: osx
      osx_image: xcode11.5
      language: node_js
      node_js: "12.18"
    - os: windows
      language: node_js
      node_js: "12.18"
script:
  - |
    export PACKAGE_VERSION=$(node -e "console.log(require('./package.json').version)")
    if [ "$TRAVIS_OS_NAME" == "linux" ]; then
      npm install;
      npm run build && ls -la build;
    elif [ "$TRAVIS_OS_NAME" == "osx" ]; then
      npm install;
      npm run build && ls -la build;
    elif [ "$TRAVIS_OS_NAME" == "windows" ]; then
      npm install;
      npm run build && ls -la build;
    fi
deploy:
  provider: releases
  api_key:
    secure: iHmTwPCcWVeccI+/oatqCBJx1t5Y1OBKUnndDpJicXZjH9WtJTtJogvC0d/9N6sJHB4wyLfEUbSlv0gu4Qy+Q1syici2m+b/IZPnY27x+DUSaotGX2kh3T96qU6eTHRAkWvNfQlbCiLmbwKFhmuLWAxqZk1QDhYyZxjAZM9y7+5d32nXdvZhawJXNafTT+9QUxC4jMo3d7R4ojkjzlQ5DHsL8keilYeqKLJveS28UGnKrERG7YL4xB4nim72Uqk+SxueDEztMvyOg7rVkCX1RbxyLfGPyjy+JzJC6+3vTtPeEylLMubHlCUX+CO3xDmzU5cqLjLKIvDmGEX0GdRG5DnclYj7gAc4pMMUPwgPKgjSbMfydatVOXIhjL2G++IBQTay2z0Os5m+see8C99juZ4TigDhxy8vnsh58JeDIl09ROPvknbFeSjpaorIWZyi0XvnxUNzqYwj9cBHDX4zexAmhwxOjGPKCjV42Ci0HRlyipuE4dWGODffN28yp2w9udRCtZwp/susrWO3OP96mN6fUsk6G+Qi0VAJ6/GjMN4US8kYXO9F4xTHaVpZzHMXBqWPf61dGcGj7IHmG/lUumRRZRHorljpzi1tr26kELEV66D45mQQUunySRog66vFKtfhIFEAXirOfTwzyQS+/v0ML63/q1isFZWfORkuEl4=
  file:
    #- 'build/nim-pools-hub-miner_$PACKAGE_VERSION_amd64.snap'
    - "build/NIM Pools Hub Miner-$PACKAGE_VERSION.AppImage"
    - "build/NIM Pools Hub Miner-$PACKAGE_VERSION-mac.zip"
    - "build/NIM Pools Hub Miner-$PACKAGE_VERSION.dmg"
    - "build/NIM Pools Hub Miner-$PACKAGE_VERSION.dmg.blockmap"
    - "build/NIM Pools Hub Miner Setup $PACKAGE_VERSION.exe"
    - "build/NIM Pools Hub Miner Setup $PACKAGE_VERSION.exe.blockmap"
  skip_cleanup: "true"
  on:
    tags: true
